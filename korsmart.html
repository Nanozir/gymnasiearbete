submitBtn.addEventListener("click", () => {
    let poäng = 0;
    const total = Object.keys(correctAnswers).length;

    // Gå igenom varje fråga
    for (let key in correctAnswers) {
        const radios = document.getElementsByName(key);
        let valtSvar = null;

        // Kolla vilket alternativ som är ikryssat
        for (let radio of radios) {
            if (radio.checked) {
                valtSvar = radio.value;
                break;
            }
        }

        const feedback = document.getElementById("feedback" + key.slice(1));

        if (valtSvar === correctAnswers[key]) {
            feedback.textContent = "✔ Rätt!";
            feedback.style.color = "green";
            feedback.style.fontWeight = "bold";
            poäng++;
        } else {
            let text = "✘ Fel";
            if (valtSvar) {
                text += " – rätt svar är " + correctAnswers[key].toUpperCase();
            } else {
                text += " – du svarade inte";
            }
            feedback.textContent = text;
            feedback.style.color = "red";
            feedback.style.fontWeight = "bold";
        }
    }

    // Resultatet högst upp eller längst ner
    resultDiv.textContent = "Du fick " + poäng + " av " + total + " rätt!";
    
    if (poäng >= total * 0.8) {
        resultDiv.style.backgroundColor = "#d4edda";
        resultDiv.style.color = "#155724";
    } else {
        resultDiv.style.backgroundColor = "#f8d7da";
        resultDiv.style.color = "#721c24";
    }
    
    resultDiv.style.padding = "15px";
    resultDiv.style.borderRadius = "8px";
    resultDiv.style.textAlign = "center";
    resultDiv.style.fontSize = "1.3em";
    resultDiv.style.margin = "25px 0";
    resultDiv.classList.remove("hidden");

    submitBtn.classList.add("hidden");
    resetBtn.classList.remove("hidden");
});
